generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Players {
  player_id   Int      @id @default(autoincrement())
  full_name   String
  email       String
  date_joined DateTime

  gameParticipants GameParticipants[]
  playerStatistics PlayerStatistics?
}

model Games {
  game_id   Int      @id @default(autoincrement())
  game_date DateTime
  location  String

  gameParticipants GameParticipants[]
}

model GameParticipants {
  participant_id  Int @id @default(autoincrement())
  game_id         Int
  player_id       Int
  buy_in_amount   Int
  cash_out_amount Int

  player Players @relation(fields: [player_id], references: [player_id])
  game   Games   @relation(fields: [game_id], references: [game_id])

  @@index([player_id])
  @@index([game_id])
}

model PlayerStatistics {
  player_stats_id    Int @id @default(autoincrement())
  player_id          Int @unique
  total_games_played Int
  total_buy_ins      Int
  total_cash_outs    Int
  net_profit         Int

  player Players @relation(fields: [player_id], references: [player_id])
}
